@(taxYearRange: TaxYearRange, isCurrentTaxYear: String, iabdType: String, previousSelection: String = "")(implicit request: Request[_], ac: uk.gov.hmrc.play.frontend.auth.AuthContext, flash: Flash, lang: Lang)

@import uk.gov.hmrc.play.views.html.helpers
@import utils.URIInformation._

@parentTemplate(pageTitle = Messages("ExclusionNinoDecision.title"), Some(taxYearRange), Some(ac.principal.accounts.epaye.get.empRef.toString) ) {

    @defining( if(isCurrentTaxYear=="cy"){""+taxYearRange.cyminus1}else{""+taxYearRange.cy} ) { yearvalue =>

        <h1 id="title">
            <span class="font-medium step-indicator">
            @Messages("Service.stepindicator", "1", "4")
            </span>
            @Messages("ExclusionNinoDecision.title")
        </h1>

        <section id="exclusion-decision">
            @if(flash.get("error")){
                <div class="error-summary-pbik" role="group" aria-labelledby="error-summary-heading-1" tabindex="-1">

                    <h1 class="heading-medium error-summary-pbik-heading" id="error-summary-heading-1">
                        There is a problem
                    </h1>

                    <ul class="error-summary-pbik-list">
                        <li><a href="#error-list-no-selection">@Messages("ExclusionDecision.noselection.error")</a></li>
                    </ul>

                </div>
            }
            @helpers.form(action = routes.ExclusionListController.withOrWithoutNinoDecision(isCurrentTaxYear, iabdValueURLMapper(iabdType))) {
                <p class="lede text">@Messages("ExclusionNinoDecision.question", Messages("BenefitInKind.label." + iabdType).toLowerCase, yearvalue)</p>

                <div class='form-group @if(flash.get("error")) {error}'>
                    @if(flash.get("error")) {
                        <span id="error-list-no-selection" class="error-notification" style="display:block">
                        @Messages("ExclusionDecision.noselection.error")
                        </span>
                    }
                    <fieldset class="inline">
                        @if(previousSelection=="nino") {
                            <label for="button-nino" class="block-label add-focus selected">
                            <input id="button-nino" type="radio" name="confirmation" value="nino" checked >
                            @Messages("Service.yes")
                            </label>
                        } else {
                            <label for="button-nino" class="block-label">
                            <input id="button-nino" type="radio" name="confirmation" value="nino" >
                            @Messages("Service.yes")
                            </label>
                        }

                        @if(previousSelection=="no-nino") {
                            <label for="button-no-nino" class="block-label add-focus selected" >
                            <input id="button-no-nino" type="radio" name="confirmation" value="no-nino" checked >
                            @Messages("Service.no")
                            </label>
                        } else {
                            <label for="button-no-nino" class="block-label">
                            <input id="button-no-nino" type="radio" name="confirmation" value="no-nino">
                            @Messages("Service.no")
                            </label>
                        }

                </fieldset>
                </div>
                <input type="submit" class="button" role="button" id="button-continue" value="@Messages("Service.continue")">
            }

            <p><a class="button-link" id="link-exlusion-back" onclick="gaEvent('Click back to exclusion overview','From: Nino/No-nino form')"
                href="@routes.ExclusionListController.performPageLoad(isCurrentTaxYear,iabdValueURLMapper(iabdType))">
              @Messages("Service.back.excluded")</a></p>

        </section>
    }

}
